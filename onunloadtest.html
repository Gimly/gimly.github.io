<!DOCTYPE html>
<html>

<head>
    <title>Test page for onunload()</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" language="javascript">
        function displayLog(event){
            console.log("onbeforeunload triggered");
            alert("test");
        }

        function pageHidden(evt)
        {
            if (evt.persisted)
                alert("pagehide event handler called.  The page was suspended and placed into the Page Cache.");
            else
                alert("pagehide event handler called for page destruction.  This is the same as the unload event.");
            
            $.ajax({
            type: "PUT", //HTTP VERB
            url: "http://dark-haze-1355.getsandbox.com/test", //URL
            dataType: 'json', //What type of response you expect back from the server
            contentType: 'application/json', //What type of data you are trying to send
            data: "Hello World"
            });
        }

        window.onbeforeunload = displayLog;
        window.addEventListener("pagehide", pageHidden, false);
    </script>
</head>

<body>

    <h1>OnUnload</h1>
    <p>This page should display a message in the console when closed.</p>

</body>

</html>